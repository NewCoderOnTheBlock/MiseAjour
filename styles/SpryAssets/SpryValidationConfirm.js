var Spry;
if(!Spry){
	Spry={}
	}
	if(!Spry.Widget){Spry.Widget={}
		}Spry.Widget.BrowserSniff=function(){
			var i=navigator.appName.toString();
			var e=navigator.platform.toString();
			var c=navigator.userAgent.toString();
			this.mozilla=this.ie=this.opera=this.safari=false;
			var g=/Opera.([0-9\.]*)/i;
			var d=/MSIE.([0-9\.]*)/i;
			var f=/gecko/i;
			var h=/(applewebkit|safari)\/([\d\.]*)/i;
			var a=false;
			if((a=c.match(g))){
				this.opera=true;this.version=parseFloat(a[1])}
				else{
					if((a=c.match(d))){
						this.ie=true;
						this.version=parseFloat(a[1])}
						else{if((a=c.match(h))){
							this.safari=true;
							this.version=parseFloat(a[2])}
							else{if(c.match(f)){
								var j=/rv:\s*([0-9\.]+)/i;a=c.match(j);
								this.mozilla=true;
								this.version=parseFloat(a[1])}}}}
								this.windows=this.mac=this.linux=false;this.Platform=c.match(/windows/i)?"windows":(c.match(/linux/i)?"linux":(c.match(/mac/i)?"mac":c.match(/unix/i)?"unix":"unknown"));
								this[this.Platform]=true;this.v=this.version;
								if(this.safari&&this.mac&&this.mozilla){
									this.mozilla=false}};
									Spry.is=new Spry.Widget.BrowserSniff();
									Spry.Widget.ValidationConfirm=function(c,a,b){
										b=Spry.Widget.Utils.firstValid(b,{});
										if(!this.isBrowserSupported()){
											return
											}
											if(this.init(c,a,b)===false){
												return false
												}
												var d=["submit"].concat(Spry.Widget.Utils.firstValid(this.options.validateOn,[]));
												d=d.join(",");this.validateOn=0;
												this.validateOn=this.validateOn|(d.indexOf("submit")!=-1?Spry.Widget.ValidationConfirm.ONSUBMIT:0);
												this.validateOn=this.validateOn|(d.indexOf("blur")!=-1?Spry.Widget.ValidationConfirm.ONBLUR:0);
												this.validateOn=this.validateOn|(d.indexOf("change")!=-1?Spry.Widget.ValidationConfirm.ONCHANGE:0);
												if(Spry.Widget.ValidationConfirm.onloadDidFire){this.attachBehaviors()}else{Spry.Widget.ValidationConfirm.loadQueue.push(this)}};
												Spry.Widget.ValidationConfirm.ONCHANGE=1;Spry.Widget.ValidationConfirm.ONBLUR=2;Spry.Widget.ValidationConfirm.ONSUBMIT=4;Spry.Widget.ValidationConfirm.prototype.init=function(c,a,b){b=Spry.Widget.Utils.firstValid(b,[]);this.options=[];this.element=this.getElement(c);if(!this.element){this.showError("The element "+(!c||c==""?"to be validated is not defined!":(c+" doesn't exists!")));return false}else{if(this.element.nodeName.toUpperCase()=="INPUT"&&(typeof this.element.type=="undefined"||",RADIO,CHECKBOX,BUTTON,SUBMIT,IMAGE,".indexOf(","+this.element.type.toUpperCase+",")==-1)){this.input=this.element}else{this.input=Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel(this.element,"INPUT")}}if(!this.input){this.showError("Element "+c+" doesn't contain any form input!");return false}var d=this.getElement(a);this.firstInput=false;if(!d){this.showError("The element "+(!a||a==""?"that contains the value to be validated is not defined!":(a+" doesn't exists!")));return false}if(d.nodeName.toUpperCase()!="INPUT"){this.firstInput=Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel(d,"INPUT")}else{if(typeof d.type=="undefined"||",RADIO,CHECKBOX,BUTTON,SUBMIT,IMAGE,".indexOf(","+d.type.toUpperCase()+",")==-1){this.firstInput=d}}if(!this.firstInput){this.showError("Element "+a+" doesn't contain any form input!");return false}this.event_handlers=[];this.validClass="confirmValidState";this.focusClass="confirmFocusState";this.requiredClass="confirmRequiredState";this.invalidClass="confirmInvalidState";b.isRequired=Spry.Widget.Utils.firstValid(b.isRequired,true);b.additionalError=Spry.Widget.Utils.firstValid(b.additionalError,false);if(b.additionalError){b.additionalError=this.getElement(b.additionalError)}Spry.Widget.Utils.setOptions(this,b);Spry.Widget.Utils.setOptions(this.options,b)};Spry.Widget.ValidationConfirm.loadQueue=[];Spry.Widget.ValidationConfirm.onloadDidFire=false;Spry.Widget.ValidationConfirm.prototype.getElement=function(a){if(a&&typeof a=="string"){a=document.getElementById(a)}return a};Spry.Widget.ValidationConfirm.processLoadQueue=function(c){Spry.Widget.ValidationConfirm.onloadDidFire=true;var d=Spry.Widget.ValidationConfirm.loadQueue;var a=d.length;for(var b=0;b<a;b++){d[b].attachBehaviors()}};Spry.Widget.ValidationConfirm.addLoadListener=function(a){if(typeof window.addEventListener!="undefined"){window.addEventListener("load",a,false)}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",a,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",a)}}}};Spry.Widget.ValidationConfirm.addLoadListener(Spry.Widget.ValidationConfirm.processLoadQueue);Spry.Widget.ValidationConfirm.prototype.destroy=function(){if(this.event_handlers){for(var b=0;b<this.event_handlers.length;b++){Spry.Widget.Utils.removeEventListener(this.event_handlers[b][0],this.event_handlers[b][1],this.event_handlers[b][2],false)}}try{delete this.element}catch(c){}try{delete this.input}catch(c){}try{delete this.event_handlers}catch(c){}try{delete this.options}catch(c){}var d=Spry.Widget.Form.onSubmitWidgetQueue;var a=d.length;for(var b=0;b<a;b++){if(d[b]==this){d.splice(b,1);break}}};Spry.Widget.ValidationConfirm.prototype.attachBehaviors=function(){if(this.event_handlers&&this.event_handlers.length>0){return}var b=this.event_handlers;if(this.input){var a=this;this.input.setAttribute("AutoComplete","off");if(this.validateOn&Spry.Widget.ValidationConfirm.ONCHANGE){var d=Spry.is.mozilla||Spry.is.opera||Spry.is.safari?"input":Spry.is.ie?"propertychange":"change";b.push([this.input,d,function(f){if(a.isDisabled()){return true}return a.validate(f||event)}]);if(Spry.is.mozilla||Spry.is.safari){b.push([this.input,"dragdrop",function(f){if(a.isDisabled()){return true}return a.validate(f)}])}else{if(Spry.is.ie){b.push([this.input,"drop",function(f){if(a.isDisabled()){return true}return a.validate(event)}])}}}b.push([this.input,"blur",function(f){if(a.isDisabled()){return true}return a.onBlur(f||event)}]);b.push([this.input,"focus",function(f){if(a.isDisabled()){return true}return a.onFocus(f||event)}]);for(var c=0;c<this.event_handlers.length;c++){Spry.Widget.Utils.addEventListener(this.event_handlers[c][0],this.event_handlers[c][1],this.event_handlers[c][2],false)}this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.input,"FORM");if(this.form){if(!this.form.attachedSubmitHandler&&!this.form.onsubmit){this.form.onsubmit=function(f){f=f||event;return Spry.Widget.Form.onSubmit(f,f.srcElement||f.currentTarget)};this.form.attachedSubmitHandler=true}if(!this.form.attachedResetHandler){Spry.Widget.Utils.addEventListener(this.form,"reset",function(f){var f=f||event;return Spry.Widget.Form.onReset(f,f.srcElement||f.currentTarget)},false);this.form.attachedResetHandler=true}Spry.Widget.Form.onSubmitWidgetQueue.push(this)}}};Spry.Widget.ValidationConfirm.prototype.reset=function(){this.switchClassName(this.element,"");this.switchClassName(this.additionalError,"");this.removeClassName(this.element,this.focusClass);this.removeClassName(this.additionalError,this.focusClass);if(Spry.is.ie){this.input.forceFireFirstOnPropertyChange=true;this.input.removeAttribute("forceFireFirstOnPropertyChange")}};Spry.Widget.ValidationConfirm.prototype.validate=function(a){if(this.isRequired&&this.input.value==""){this.switchClassName(this.element,this.requiredClass);this.switchClassName(this.additionalError,this.requiredClass);return false}if(this.input.value.length>0&&this.input.value!=this.firstInput.value){this.switchClassName(this.element,this.invalidClass);this.switchClassName(this.additionalError,this.invalidClass);return false}this.switchClassName(this.element,this.validClass);this.switchClassName(this.additionalError,this.validClass);return true};Spry.Widget.ValidationConfirm.prototype.onBlur=function(a){this.removeClassName(this.element,this.focusClass);this.removeClassName(this.additionalError,this.focusClass);if(this.validateOn&Spry.Widget.ValidationConfirm.ONBLUR){this.validate(a)}};Spry.Widget.ValidationConfirm.prototype.onFocus=function(){this.addClassName(this.element,this.focusClass);this.addClassName(this.additionalError,this.focusClass)};Spry.Widget.ValidationConfirm.prototype.switchClassName=function(d,c){var b=[this.validClass,this.requiredClass,this.invalidClass];for(var a=0;a<b.length;a++){this.removeClassName(d,b[a])}this.addClassName(d,c)};Spry.Widget.ValidationConfirm.prototype.addClassName=function(b,a){if(!b||!a||(b.className&&b.className.indexOf(a)!=-1&&b.className.search(new RegExp("\\b"+a+"\\b"))!=-1)){return}b.className+=(b.className?" ":"")+a};Spry.Widget.ValidationConfirm.prototype.removeClassName=function(b,a){if(!b||!a||(b.className&&b.className.indexOf(a)!=-1&&b.className.search(new RegExp("\\b"+a+"\\b"))==-1)){return}b.className=b.className.replace(new RegExp("\\s*\\b"+a+"\\b","g"),"")};Spry.Widget.ValidationConfirm.prototype.isBrowserSupported=function(){return Spry.is.ie&&Spry.is.v>=5&&Spry.is.windows||Spry.is.mozilla&&Spry.is.v>=1.4||Spry.is.safari||Spry.is.opera&&Spry.is.v>=9};Spry.Widget.ValidationConfirm.prototype.isDisabled=function(){return this.input&&(this.input.disabled||this.input.readOnly)||!this.input};Spry.Widget.ValidationConfirm.prototype.showError=function(a){alert("Spry.ValidationConfirm ERR: "+a)};if(!Spry.Widget.Form){Spry.Widget.Form={}}if(!Spry.Widget.Form.onSubmitWidgetQueue){Spry.Widget.Form.onSubmitWidgetQueue=[]}if(!Spry.Widget.Form.validate){Spry.Widget.Form.validate=function(f){var e=true;var d=true;var c=Spry.Widget.Form.onSubmitWidgetQueue;var a=c.length;for(var b=0;b<a;b++){if(!c[b].isDisabled()&&c[b].form==f){d=c[b].validate();e=d&&e}}return e}}if(!Spry.Widget.Form.onSubmit){Spry.Widget.Form.onSubmit=function(b,a){if(Spry.Widget.Form.validate(a)==false){return false}return true}}if(!Spry.Widget.Form.onReset){Spry.Widget.Form.onReset=function(d,f){var c=Spry.Widget.Form.onSubmitWidgetQueue;var a=c.length;for(var b=0;b<a;b++){if(!c[b].isDisabled()&&c[b].form==f&&typeof(c[b].reset)=="function"){c[b].reset()}}return true}}if(!Spry.Widget.Form.destroy){Spry.Widget.Form.destroy=function(b){var c=Spry.Widget.Form.onSubmitWidgetQueue;for(var a=0;a<Spry.Widget.Form.onSubmitWidgetQueue.length;a++){if(c[a].form==b&&typeof(c[a].destroy)=="function"){c[a].destroy();a--}}}}if(!Spry.Widget.Form.destroyAll){Spry.Widget.Form.destroyAll=function(){var b=Spry.Widget.Form.onSubmitWidgetQueue;for(var a=0;a<Spry.Widget.Form.onSubmitWidgetQueue.length;a++){if(typeof(b[a].destroy)=="function"){b[a].destroy();a--}}}}if(!Spry.Widget.Utils){Spry.Widget.Utils={}}Spry.Widget.Utils.setOptions=function(d,c,a){if(!c){return}for(var b in c){if(a&&c[b]==undefined){continue}d[b]=c[b]}};Spry.Widget.Utils.firstValid=function(){var a=null;for(var b=0;b<Spry.Widget.Utils.firstValid.arguments.length;b++){if(typeof Spry.Widget.Utils.firstValid.arguments[b]!="undefined"){a=Spry.Widget.Utils.firstValid.arguments[b];break}}return a};Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel=function(a,c){var b=a.getElementsByTagName(c);if(b){return b[0]}return null};Spry.Widget.Utils.getFirstParentWithNodeName=function(a,b){while(a.parentNode&&a.parentNode.nodeName.toLowerCase()!=b.toLowerCase()&&a.parentNode.nodeName!="BODY"){a=a.parentNode}if(a.parentNode&&a.parentNode.nodeName.toLowerCase()==b.toLowerCase()){return a.parentNode}else{return null}};Spry.Widget.Utils.addEventListener=function(c,b,d,a){try{if(c.addEventListener){c.addEventListener(b,d,a)}else{if(c.attachEvent){c.attachEvent("on"+b,d,a)}}}catch(f){}};Spry.Widget.Utils.removeEventListener=function(c,b,d,a){try{if(c.removeEventListener){c.removeEventListener(b,d,a)}else{if(c.detachEvent){c.detachEvent("on"+b,d,a)}}}catch(f){}};
